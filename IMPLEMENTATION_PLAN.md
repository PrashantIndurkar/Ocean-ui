# Ocean-ui Multi-Framework Implementation Plan

## Overview

This document tracks the implementation progress of Ocean-ui's monorepo structure and multi-framework support (React + SolidJS).

---

## âœ… Phase 1: Monorepo Shell & Basic Structure (COMPLETED)

### Completed Tasks

1. **Monorepo Root Structure**

   - âœ… Created `pnpm-workspace.yaml` defining `apps/*` and `packages/*`
   - âœ… Created root `package.json` with Turbo scripts
   - âœ… Created `turbo.json` for cached, incremental builds
   - âœ… Created `tsconfig.base.json` with shared TypeScript config and path aliases

2. **Apps Structure**

   - âœ… Created `apps/docs/` directory
   - âœ… Moved Next.js app from root to `apps/docs/`
   - âœ… Created `apps/docs/package.json` with workspace dependencies
   - âœ… Created `apps/docs/tsconfig.json` extending base config
   - âœ… Fixed `.source` directory generation (fumadocs-mdx postinstall)
   - âœ… Updated all imports in `apps/docs` to use workspace packages

3. **Packages Structure**

   - âœ… Created `packages/utils/` package with shared utilities (`cn` function)
   - âœ… Created `packages/ui-react/` package structure (ready for components)
   - âœ… Created barrel exports in `packages/ui-react/src/index.ts`
   - âœ… Created package.json files with proper workspace dependencies
   - âœ… Created tsconfig.json files extending base config

4. **Dependencies & Setup**
   - âœ… Installed all dependencies via `pnpm install`
   - âœ… Verified workspace linking works correctly
   - âœ… TypeScript compilation passes

### Current Structure

```
Ocean-ui/
â”œâ”€â”€ apps/
â”‚   â””â”€â”€ docs/              âœ… Next.js docs app (moved from root)
â”‚       â”œâ”€â”€ src/
â”‚       â”œâ”€â”€ content/
â”‚       â”œâ”€â”€ .source/       âœ… Generated by fumadocs-mdx
â”‚       â””â”€â”€ package.json
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ utils/             âœ… Shared utilities (cn function)
â”‚   â””â”€â”€ ui-react/          âœ… React library package (structure ready)
â”œâ”€â”€ pnpm-workspace.yaml    âœ…
â”œâ”€â”€ turbo.json             âœ…
â”œâ”€â”€ tsconfig.base.json     âœ…
â””â”€â”€ package.json           âœ…
```

### Notes

- Website-specific components (`animated-tooltip`, `theme-toggle`) remain in `apps/docs/src/components/ui/` (not part of design system)
- Old `src/` directory at root still exists (can be removed after verification)
- `packages/ui-react` currently only exports utilities - ready for actual design system components

---

## âœ… Phase 2: Design Tokens & SolidJS Package (COMPLETED)

### Tasks

1. **Create `packages/tokens/` Package**

   - [x] Extract design tokens from `apps/docs/src/app/styles/`
   - [x] Create `packages/tokens/src/css/` with:
     - [x] CSS variables (theme.css) - **Only file needed**
     - [x] Tailwind automatically reads CSS variables and generates utility classes
   - [x] **Simplified**: Removed unnecessary TypeScript token files (Tailwind handles everything)
   - [x] Create `packages/tokens/package.json` with proper exports
   - [x] Update `apps/docs` to consume tokens package
   - [x] Update `packages/ui-react` to consume tokens package

2. **Create `packages/ui-solid/` Package**

   - [x] Create `packages/ui-solid/` directory structure
   - [x] Create `packages/ui-solid/package.json` with:
     - [x] Dependencies: `@ark-ui/solid`, `lucide-solid`, `@ocean-ui/tokens`, `@ocean-ui/utils`
   - [x] Create `packages/ui-solid/tsconfig.json` extending base config
   - [x] Create `packages/ui-solid/src/index.ts` barrel export
   - [x] Set up SolidJS component structure (mirroring React)

3. **Update Workspace Dependencies**
   - [x] Add `@ocean-ui/tokens` to `packages/ui-react/package.json`
   - [x] Add `@ocean-ui/tokens` to `packages/ui-solid/package.json`
   - [x] Add `@ocean-ui/tokens` to `apps/docs/package.json`
   - [x] Run `pnpm install` to link packages

---

## âœ… Phase 3: Registry System (COMPLETED)

### Completed Tasks

1. **Create Registry Structure in `apps/docs/src/registry/`**

   - [x] Create `apps/docs/src/registry/manifest/` folder
   - [x] Create `apps/docs/src/registry/react/` folder
   - [x] Create `apps/docs/src/registry/solid/` folder
   - [x] Create manifest system (TarkUI-style):
     - [x] `apps/docs/src/lib/components.ts` - Component list (single source of truth)
     - [x] `apps/docs/src/lib/registry.ts` - Type definitions
     - [x] `apps/docs/src/lib/registry.utils.ts` - URL parsing, manifest loading
     - [x] `apps/docs/src/lib/registry.server.ts` - Server-side file reading

2. **Create Registry API Route**

   - [x] Create `apps/docs/src/app/r/[frameworkCode]/[componentIndex]/[exampleIndex]/route.ts`
   - [x] Implement URL decoding (framework code â†’ framework name, indices â†’ slugs/names)
   - [x] Implement file reading from registry folders
   - [x] Return shadcn-compatible JSON format
   - [x] Include dependencies, CSS vars, and CSS in response

3. **Framework Mapping**
   - [x] Create framework code mapping (`react` â†’ `r`, `solid` â†’ `s`)
   - [x] Create reverse mapping for URL parsing
   - [x] Add to `registry.utils.ts`

### Registry Structure

```
apps/docs/src/
â”œâ”€â”€ registry/
â”‚   â”œâ”€â”€ manifest/          âœ… Shared manifests (single source of truth)
â”‚   â”œâ”€â”€ react/             âœ… React component examples
â”‚   â””â”€â”€ solid/             âœ… SolidJS component examples
â””â”€â”€ lib/
    â”œâ”€â”€ components.ts      âœ… Component list
    â”œâ”€â”€ registry.ts        âœ… Type definitions
    â”œâ”€â”€ registry.utils.ts  âœ… URL parsing, manifest loading
    â””â”€â”€ registry.server.ts âœ… Server-side file reading
```

### Registry API

- **URL Format**: `/r/{frameworkCode}/{componentIndex}/{exampleIndex}.json`
- **Framework Codes**: `r` = React, `s` = SolidJS
- **Example**: `/r/r/0/0.json` â†’ React, first component (accordion), first example
- **Response**: Shadcn-compatible JSON with source code, dependencies, CSS vars

---

## ðŸš§ Phase 4: First Component Implementation (Accordion) (NOT STARTED)

### Tasks

1. **Implement Accordion in React**

   - [ ] Create `packages/ui-react/src/components/ui/accordion/accordion.tsx`
   - [ ] Use `@ark-ui/react/accordion` as base
   - [ ] Implement with proper TypeScript types
   - [ ] Add to `packages/ui-react/src/index.ts` exports
   - [ ] Follow Web Interface Guidelines (accessibility, keyboard navigation)

2. **Implement Accordion in Solid**

   - [ ] Create `packages/ui-solid/src/components/ui/accordion/accordion.tsx`
   - [ ] Use `@ark-ui/solid/accordion` as base
   - [ ] Mirror React API (same prop names, variants)
   - [ ] Use SolidJS patterns (`<For>`, signals, `class` instead of `className`)
   - [ ] Add to `packages/ui-solid/src/index.ts` exports

3. **Create Registry Examples**

   - [ ] Create `apps/docs/src/registry/manifest/accordion.ts` with example definitions
   - [ ] Create React examples in `apps/docs/src/registry/react/accordion/`:
     - [ ] `basic.tsx`
     - [ ] `with-icon.tsx`
     - [ ] `with-chevron.tsx`
     - [ ] (More examples as needed)
   - [ ] Create Solid examples in `apps/docs/src/registry/solid/accordion/`:
     - [ ] `basic.tsx`
     - [ ] `with-icon.tsx`
     - [ ] `with-chevron.tsx`
     - [ ] (Mirror React examples)

4. **Create Documentation**

   - [ ] Create `apps/docs/content/docs/components/accordion.mdx`
   - [ ] Add component overview, API docs, accessibility notes
   - [ ] Add live preview component (using registry)
   - [ ] Add code tabs for React vs Solid
   - [ ] Update `apps/docs/content/docs/components/meta.json` to include accordion

5. **Test Registry API**
   - [ ] Test `/r/r/0/0.json` returns React basic accordion
   - [ ] Test `/r/s/0/0.json` returns Solid basic accordion
   - [ ] Verify JSON format matches shadcn schema
   - [ ] Verify dependencies are correct

---

## ðŸš§ Phase 5: Scale Components & Automation (NOT STARTED)

### Tasks

1. **Add More Core Components**

   - [ ] Button (React + Solid)
   - [ ] Input (React + Solid)
   - [ ] Card (React + Solid)
   - [ ] Dialog (React + Solid)
   - [ ] (Continue with other components)

2. **Add `components.json`**

   - [ ] Create root `components.json` (shadcn-style)
   - [ ] Configure Tailwind paths
   - [ ] Configure registry base URL
   - [ ] Configure aliases

3. **Clean Up Old Files**

   - [ ] Remove old `src/` directory at root
   - [ ] Remove old config files at root (if any)
   - [ ] Verify everything still works

4. **Documentation & Tooling**
   - [ ] Update README with new structure
   - [ ] Add CONTRIBUTING.md with component development guide
   - [ ] Set up Changesets for versioning (optional)
   - [ ] Add CI/CD workflows (optional)

---

## Summary

- **Phase 1**: âœ… **COMPLETED** - Monorepo shell created, apps/docs moved, packages/utils and packages/ui-react structure ready
- **Phase 2**: âœ… **COMPLETED** - Design tokens extraction, SolidJS package creation
- **Phase 3**: âœ… **COMPLETED** - Registry system (manifest, API route, framework mapping)
- **Phase 4**: ðŸš§ **NOT STARTED** - First component (Accordion) implementation in React + Solid
- **Phase 5**: ðŸš§ **NOT STARTED** - Scale to more components, automation, cleanup

---

## Next Steps

1. âœ… **Phase 3 Complete**: Registry system is ready for component examples
2. **Start Phase 4**: Implement first component (Accordion) - React + Solid + Registry + Docs
3. **Scale to Phase 5**: Add more components, automation, cleanup old files

---

## Notes

- All components should follow the Web Interface Guidelines (accessibility, keyboard navigation, etc.)
- React components use `className`, Solid components use `class`
- Both frameworks should share the same design tokens for visual consistency
- Registry examples should be self-contained (demo data inline in each example file)
